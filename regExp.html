<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>正则表达式</title>

        <link href="css/bootstrap.min.css" rel="stylesheet">
        <style>
            table.table-hover{counter-reset: order;}
            table.table-hover tr>td:first-child::before{
                counter-increment: order;
                content:counter(order);
            }
        </style>
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
            <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

    </head>
    <body>
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#lzxNav" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">CppJavaScriptPowerShellPython</a>
                </div>
            
                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="lzxNav">
                <ul class="nav navbar-nav">
                    <li class="active dropdown">
                        <a href="base.html" class="dropdown-toggle" data-toggle="dropdown" rolte="button" aria-haspopup="true" aria-expanded="false">基础 <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="note.html">注释</a></li>
                            <li><a href="multipleLineString.html">多行字符串</a></li>
                            <li><a href="timespan.html">计算时间差</a></li>
                            <li><a href="json.html">JSON</a></li>
                            <li><a href="random.html">随机数</a></li>
                            <li><a href="radix.html">进制转换</a></li>
                            <li><a href="file.html">文件读写</a></li>
                            <li><a href="regExp.html">正则表达式</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#">Separated link</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#">One more separated link</a></li>
                        </ul>
                    </li>
                    <li><a href="advance.html">高级</a></li>
                    <li class="dropdown">
                        <a href="project.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">项目<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="timespan.html">计算时间差</a></li>
                            <li><a href="json.html">JSON</a></li>
                            <li><a href="random.html">随机数</a></li>
                            <li><a href="radix.html">进制转换</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#">Separated link</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="#">One more separated link</a></li>
                        </ul>
                    </li>
                </ul>
                </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
        </nav>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h1 class="text-center">正则表达式</h1>
                    <p>参考 <a href = "http://deerchao.net/tutorials/regex/regex.htm">正则表达式30分钟入门教程</a>。</p>
                    <section>
                        <table class="table table-bordered table-hover table-condensed">
                            <caption>元字符——元字符（Metacharacter）是拥有特殊含义的字符</caption>
                            <thead>
                                <tr>
                                    <th>序号</th>
                                    <th>元字符</th>
                                    <th>描述</th>
                                </tr>
                            </thead>
                            <tbody>
                                  <tr>
                                    <td></td>
                                    <td>.</td>
                                    <td>查找单个字符，除了换行和行结束符。</td>
                                  </tr>
                                
                                  <tr>
                                    <td></td>
                                    <td>\w</td>
                                    <td>查找单词字符。等价于[a-zA-Z0-9_]。</td>
                                  </tr>
                                  <tr>
                                    <td></td>
                                    <td>\W</td>
                                    <td>查找非单词字符。等价于[^a-zA-Z0-9_]。</td>
                                  </tr>
                                  <tr>
                                    <td></td>
                                    <td>\d</td>
                                    <td>查找数字，等价于[0-9]。</td>
                                  </tr>
                                  <tr>
                                    <td></td>
                                    <td>\D</td>
                                    <td>查找非数字字符，等价于[^0-9]。</td>
                                  </tr>
                                  <tr>
                                    <td></td>
                                    <td>\s</td>
                                    <td>查找空白字符，包括空格、换行、回车、制表符等等，[ \n\r\t\v\f]。</td>
                                  </tr>
                                  <tr>
                                    <td></td>
                                    <td>\S</td>
                                    <td>查找非空白字符。</td>
                                  </tr>
                                  <tr>
                                    <td></td>
                                    <td>\b</td>
                                    <td>匹配单词边界，例如，“er\b”可以匹配“never”中的“er”，但不能匹配“verb”中的“er”。</td>
                                  </tr>
                                  <tr>
                                    <td></td>
                                    <td>\B</td>
                                    <td>匹配非单词边界。</td>
                                  </tr>
                                  <tr>
                                    <td></td>
                                    <td>\0</td>
                                    <td>查找 NUL 字符。</td>
                                  </tr>
                                  <tr>
                                    <td></td>
                                    <td>\n</td>
                                    <td>查找换行符。</td>
                                  </tr>
                                  <tr>
                                    <td></td>
                                    <td>\f</td>
                                    <td>查找换页符。</td>
                                  </tr>
                                  <tr>
                                    <td></td>
                                    <td>\r</td>
                                    <td>查找回车符。</td>
                                  </tr>
                                <tr><td></td>
                                    <td>\t</td>
                                    <td>查找制表符。</td>
                                  </tr>
                                  <tr><td></td>
                                    <td>\v</td>
                                    <td>查找垂直制表符。</td>
                                  </tr> 
                                  <tr>
                                      <td></td>
                                      <td>^</td>
                                      <td>匹配字符串开始的位置，如果设置了多行，匹配\r或\n 之后的位置。</td>
                                  </tr>
                                  <tr>
                                    <td></td>
                                    <td>$</td>
                                    <td>匹配字符串结束的位置，如果设置了多行，匹配\r或\n 之前的位置。</td>
                                </tr>                            
                            </tbody>
                        </table>
                        <table class="table table-bordered table-hover table-condesned">
                            <caption>量词</caption>
                            <thead>
                                <tr>
                                    <th>序号</th>
                                    <th>量词</th>
                                    <th>描述</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td></td>
                                    <td>*</td>
                                    <td>匹配0次、1次或者多次，等价于{0,}。</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>+</td>
                                    <td>匹配1次或者多次，等价于{1,}。</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>?</td>
                                    <td>匹配0次、1次，等价于{0,1}。</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>{n}</td>
                                    <td>匹配 n 次。</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>{n,}</td>
                                    <td>匹配至少 n 次。</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>{n,m}</td>
                                    <td>匹配 n 到 m 次。</td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="table table-bordered table-hover table-condesned">
                            <caption>方括号</caption>
                            <thead>
                                <tr>
                                    <td>序号</td>
                                    <td>表达式</td>
                                    <td>描述</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td></td>
                                    <td>[abc]</td>
                                    <td>字符集，匹配当中的任何一个字符。</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>[^abc]</td>
                                    <td>匹配不包含的任何字符。</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>[0-9]</td>
                                    <td>匹配数字字符，等价于\d 或者 [0123456789]。</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>[a-z]</td>
                                    <td>匹配26个小写英文字符。</td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="table table-bordered table-hover table-condesned">
                            <caption>捕获与非捕获</caption>
                            <thead>
                                <tr>
                                    <th>序号</th>
                                    <th style="width:7em;">表达式</th>
                                    <th>说明</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td></td>
                                    <td>(pattern)</td>
                                    <td>匹配pattern并获取这一匹配。所获取的匹配可以从产生的Matches集合得到，在VBScript中使用SubMatches集合，在JScript中则使用$0…$9属性。要匹配圆括号字符，请使用“\(”或“\)”。</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>(?:pattern)</td>
                                    <td>匹配pattern但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。这在使用或字符“(|)”来组合一个模式的各个部分是很有用。例如“industr(?:y|ies)”就是一个比“industry|industries”更简略的表达式。</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>(?=pattern)</td>
                                    <td>正向肯定预查，在任何匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如，“Windows(?=95|98|NT|2000)”能匹配“Windows2000”中的“Windows”，但不能匹配“Windows3.1”中的“Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>(?!pattern)</td>
                                    <td>正向否定预查，在任何不匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如“Windows(?!95|98|NT|2000)”能匹配“Windows3.1”中的“Windows”，但不能匹配“Windows2000”中的“Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>(?&lt;=pattern)</td>
                                    <td>反向肯定预查，与正向肯定预查类拟，只是方向相反。例如，“(?&lt;=95|98|NT|2000)Windows”能匹配“2000Windows”中的“Windows”，但不能匹配“3.1Windows”中的“Windows”。</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>(?&lt;!pattern)</td>
                                    <td>反向否定预查，与正向否定预查类拟，只是方向相反。例如“(?&lt;!95|98|NT|2000)Windows”能匹配“3.1Windows”中的“Windows”，但不能匹配“2000Windows”中的“Windows”。</td>
                                </tr>
                            </tbody>
                        </table>
                        <p><b>贪婪匹配与非贪婪匹配：</b>当该字符紧跟在任何一个其他限制符（*,+,?，{n}，{n,}，{n,m}）后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串“oooo”，“o+?”将匹配单个“o”，而“o+”将匹配所有“o”。</p>
                    </section>
                </div>
                <div class="col-md-12">
                    <section>
                        <h2>C/C++的多行字符串 </h2>
                        <p>没有直接的多行字符串格式，可以利用多行语句的语法实现，每一行后加\，只要不是将基本词法元素分开，都可以直接折行。基本词法元素就是 关键字、字符串、数字等等。</p>
                        <pre>
/*
FileName:multipleLineString.cpp
Function:多行字符串
CreateDate:2017-11-14
Author:李志新 
*/

#include &lt;iostream&gt;
using namespace std;
int main(){
   const char* ptr = "Lorem ipsum dolor sit amet consectetur adipisicing elit.\
            Fuga nihil quidem ratione dolore. Qui velit deleniti earum natus sed,\
            rem sit, nobis facere autem, inventore tempore doloremque voluptatibus.\
         Maiores, sed?";
   cout <<  ptr << endl;
   
   return 0;
}
                        </pre>
                    </section>
                    <section>
                        <h2>JavaScript 的正则表达式</h2>
                        <dl>
                            <dt>字面量语法：</dt>
                            <dd><code>var p = /pattern/attribute ;</code></dd>
                            <dt>RegExp对象语法：</dt>
                            <dd><code>var p = new RegExp(pattern, attribute) ;</code></dd>
                            <dt>参数：</dt>
                            <dd>pattern 是字符串，指定了正则表达式的模式。</dd>
                            <dd>attribute 是一个可选的字符串，包括"g"(全局)，"i"(忽略大小写)，"m"(多行，此模式下，字符串中有回车或换行，^和$ 匹配行首和行尾)。</dd>
                            <dt>返回值：</dt>
                            <dd>一个新的 RegExp 对象，具有指定的模式和标志。如果参数 pattern 是正则表达式而不是字符串，那么 RegExp() 构造函数将用与指定的 RegExp 相同的模式和标志创建一个新的 RegExp 对象。</dd>                                
                            <dd>如果不用 new 运算符，而将 RegExp() 作为函数调用，那么它的行为与用 new 运算符调用时一样，只是当 pattern 是正则表达式时，它只返回 pattern，而不再创建一个新的 RegExp 对象。</dd>
                        </dl>
                        <p>查找本网页上的超链接地址。</p>
                        <pre>
var html = document.querySelector("body").innerHTML;
var p = /(?&lt;=href\s*?=\s*?").*?(?=" *)/g;
var r = html.match(p);
console.log(r); </pre>
                        <script>
                            var html = document.querySelector("body").innerHTML;
                            var p = /(?<=href\s*?=\s*?").*?(?=" *)/g;
                            var r = html.match(p);
                            console.log(r);                            
                        </script>
                    </section>
                    <section>
                        <h2>PowerShell 的正则表达式</h2>
                        <p>PowerShell 使用Regex 类来实现正则表达式，命名空间是 System.Text.RegularExpressions。在PowerShell 中可直接使用regex。</p>
                        <p>Regex 类的常用方法。</p>
                        <dl>
                            <dt>IsMatch</dt>
                            <dd>通过调用 IsMatch 方法确定输入文本中是否具有正则表达式模式匹配项。</dd>  
                            <dd>Regex.IsMatch(string, pattern)</dd>  
                            <dt>Match、Matches</dt>
                            <dd>通过调用 Match 或 Matches 方法检索匹配正则表达式模式的一个或所有文本匹配项。</dd>
                            <dd>第一个方法返回提供有关匹配文本的信息的 Match 对象。 第二个方法返回 MatchCollection 对象，该对象对于在分析的文本中找到的每个匹配项包含一个 Match 对象。</dd>   
                            <dt>Replace</dt>
                            <dd>通过调用 Replace 方法替换匹配正则表达式模式的文本。</dd>
                        </dl>
                        <pre>
$p = New-Object System.Text.RegularExpressions.Regex('(?&lt;=href\s*?=\s*?").*?(?=" *)') 
$p = [regex]('(?&lt;=href\s*?=\s*?").*?(?=" *)')
$html = @"
        &lt;nav class="navbar navbar-default"&gt;
            ......    
        &lt;/div&gt;
"@
$r =[System.Text.RegularExpressions.Regex]::Matches($html, $p)
$r = [regex]::Matches($html, $p)
$r|ForEach-Object{$_.value}</pre>
                    </section>
                    <section>
                        <h2>Python 文件的读写</h2>
                        <p>Python 文件的读写是同过内置函数 open 实现的，可以读取文本文件和二进制文件，语法如下：<br>
                            <code>open(file, mode='r', buffering=-1, encoding=None, errors=None, newline=None, closefd=True, opener=None)</code>
                        </p>
                        <dl>
                            <dt>file</dt>
                            <dd>可以是文件名（相对路径或者绝对路径），或者是一个文件的描述符（一个整数）。</dd>
                            <dt>mode</dt>
                            <dd>文件打开方式的字符串。</dd>
                            <dd>默认值是'r'，表示打开并以文本模式读取文件。</dd>
                            <dd>'w' 表示可以写入文件（清空原有文件内容）；'a' 表示追加文件内容；</dd>
                            <dd>
                                <table class="table table-border talbe-hover">
                                    <colgroup>
                                        <col width="20%" />
                                        <col width="80%" />
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th>Character</th>
                                            <th>Meaning</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="row-even">
                                            <td>'r'</td>
                                            <td>open for reading (default)</td>
                                        </tr>
                                        <tr>
                                            <td>'w'</td>
                                            <td>open for writing, truncating the file first</td>
                                        </tr>
                                        <tr >
                                            <td>'x'</td>
                                            <td>open for exclusive creation, failing if the file already exists</td>
                                        </tr>
                                        <tr>
                                            <td>'a'</td>
                                            <td>open for writing, appending to the end of the file if it exists</td>
                                        </tr>
                                        <tr>
                                            <td>'b'</td>
                                            <td>binary mode</td>
                                        </tr>
                                        <tr>
                                            <td>'t'</td>
                                            <td>text mode (default)</td>
                                        </tr>
                                        <tr >
                                            <td>'+'</td>
                                            <td>open a disk file for updating (reading and writing)</td>
                                        </tr>
                                        <tr>
                                            <td>'U'</td>
                                            <td>universal newlines mode (deprecated)</td>
                                        </tr>
                                    </tbody>
                                    </table>
                            </dd>
                            <dt>encoding</dt>
                            <dd>encoding is the name of the encoding used to decode or encode the file. This should only be used in text mode. The default encoding is platform dependent, but any text encoding supported by Python can be used. </dd>
                        </dl>
                        </section>
                        
                        <p>Methods of File Objects</p>
                        <ul>
                            <li>fileOjbect.read(size)</li>
                            <li>fileOjbect.readline()</li>
                            <li>fileOjbect.readlines()</li>
                            <li>fileOjbect.write(string)</li>
                            <li>fileOjbect.tell()</li>
                            <li>fileOjbect.seek(offset, fromWhat)</li>
                            <li>fileOjbect.close()</li>
                        </ul>
                        <p>通常使用with 语句打开文件<code>with open("filename", "mode") as f:</code></p>
                        <pre>
#filename:scoreAnaylse.py
#function:file object read and write with use open function
#authoer:李志新
#datetime:2017-11-16

with open("score.txt") as f:
    ls =f.readlines()
totalScore = 0
count = 0
for line in ls:
    arr = line.split(",")
    totalScore = totalScore + int(arr[4])
    count = count + 1          
print("There are have %d students in exam and avaerage is %.2f" %(count, totalScore / count))</pre>
                    </section>    
                    <section>
                        <h2>总结</h2>
                        <p>
                           JavaScript、PowerShell、Python都有专门的多行字符串语法，对应的分别是撇号`...`、@"..."@、''' ... '''。
                           还有一种变通利用多行语句实现（行尾加\），有C/C++、JavaScript、Python。
                        </p>
                    </section>    
                </div>
            </div>
        </div>
    </body>
</html>